---
phase: 15-stack-configuration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/wxcode/data/stacks/spa/fastapi-react.yaml
  - src/wxcode/data/stacks/spa/fastapi-vue.yaml
  - src/wxcode/data/stacks/spa/nestjs-react.yaml
  - src/wxcode/data/stacks/spa/nestjs-vue.yaml
  - src/wxcode/data/stacks/spa/laravel-react.yaml
autonomous: true

must_haves:
  truths:
    - "5 SPA stack configs exist as YAML files"
    - "Each YAML has all required fields (stack_id, name, group, language, framework, orm, etc.)"
    - "Type mappings include all 28 HyperFile type codes"
    - "File structure includes both backend/ and frontend/ paths"
  artifacts:
    - path: "src/wxcode/data/stacks/spa/fastapi-react.yaml"
      provides: "FastAPI + React stack config"
      contains: "stack_id: fastapi-react"
    - path: "src/wxcode/data/stacks/spa/nestjs-react.yaml"
      provides: "NestJS + React stack config"
      contains: "stack_id: nestjs-react"
    - path: "src/wxcode/data/stacks/spa/laravel-react.yaml"
      provides: "Laravel + React stack config"
      contains: "stack_id: laravel-react"
  key_links:
    - from: "spa/*.yaml"
      to: "Stack model fields"
      via: "YAML structure"
      pattern: "stack_id.*group.*spa"
---

<objective>
Create YAML configuration files for the 5 SPA (Single Page Application) target stacks.

Purpose: SPA stacks have separate backend and frontend directories. The configs define both backend (API) and frontend (React/Vue) conventions for LLM-driven code generation.

Output: 5 YAML files in src/wxcode/data/stacks/spa/
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/15-stack-configuration/15-RESEARCH.md
@src/wxcode/models/stack.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Python-backend SPA stack configs</name>
  <files>
    src/wxcode/data/stacks/spa/fastapi-react.yaml
    src/wxcode/data/stacks/spa/fastapi-vue.yaml
  </files>
  <action>
Create 2 YAML files for FastAPI + React/Vue stacks:

**Common characteristics:**
- group: "spa"
- language: "python"
- framework: "fastapi"
- orm: "sqlalchemy"
- orm_pattern: "data-mapper"
- template_engine: "jsx" (React) or "vue" (Vue)

**File structure (both):**
```yaml
file_structure:
  models: "backend/app/models/"
  schemas: "backend/app/schemas/"
  routes: "backend/app/routes/"
  services: "backend/app/services/"
  components: "frontend/src/components/"
  pages: "frontend/src/pages/"
  hooks: "frontend/src/hooks/"        # React
  composables: "frontend/src/composables/"  # Vue
  frontend_services: "frontend/src/services/"
  types: "frontend/src/types/"
```

**Naming conventions:**
```yaml
naming_conventions:
  class: "PascalCase"
  file: "snake_case"         # Python backend
  component: "PascalCase"    # React/Vue components
  variable: "snake_case"     # Python
  js_variable: "camelCase"   # JavaScript/TypeScript
  constant: "UPPER_SNAKE_CASE"
  database_table: "snake_case"
```

**Type mappings:**
Use Python types for backend, TypeScript types in comments for frontend reference:
- 1: bytes (Buffer in TS)
- 2, 3: str (string in TS)
- 4, 5, 6: int (number in TS)
- 7: int (bigint in TS)
- 8, 9: float (number in TS)
- 10, 11, 12: datetime (Date in TS)
- 13: bool (boolean in TS)
- 14: Decimal (Decimal from decimal.js in TS)
- 15, 16, 18, 20, 21, 22, 27, 28: str (string in TS)
- 17: bytes (Buffer in TS)
- 19, 24: int (number in TS)
- 23: dict (JsonValue in TS)
- 25: int (bigint in TS)
- 26: UUID (string in TS)

**1. fastapi-react.yaml:**
- stack_id: "fastapi-react"
- name: "FastAPI + React"
- template_engine: "jsx"
- hooks directory for React hooks

**2. fastapi-vue.yaml:**
- stack_id: "fastapi-vue"
- name: "FastAPI + Vue"
- template_engine: "vue"
- composables directory for Vue composables
  </action>
  <verify>
    ls src/wxcode/data/stacks/spa/fastapi-*.yaml
    # Should show 2 files
    python -c "import yaml; print(yaml.safe_load(open('src/wxcode/data/stacks/spa/fastapi-react.yaml'))['stack_id'])"
    # Should output: fastapi-react
  </verify>
  <done>FastAPI + React and FastAPI + Vue stack configs created</done>
</task>

<task type="auto">
  <name>Task 2: Create TypeScript/PHP-backend SPA stack configs</name>
  <files>
    src/wxcode/data/stacks/spa/nestjs-react.yaml
    src/wxcode/data/stacks/spa/nestjs-vue.yaml
    src/wxcode/data/stacks/spa/laravel-react.yaml
  </files>
  <action>
Create 3 YAML files for NestJS and Laravel SPA stacks:

**NestJS stacks (nestjs-react, nestjs-vue):**
- group: "spa"
- language: "typescript"
- framework: "nestjs"
- orm: "typeorm"
- orm_pattern: "data-mapper"
- template_engine: "jsx" (React) or "vue" (Vue)

File structure:
```yaml
file_structure:
  # Backend (NestJS)
  entities: "backend/src/entity/"
  dto: "backend/src/dto/"
  modules: "backend/src/modules/"
  services: "backend/src/services/"
  controllers: "backend/src/controllers/"
  # Frontend
  components: "frontend/src/components/"
  pages: "frontend/src/pages/"
  hooks: "frontend/src/hooks/"        # React only
  composables: "frontend/src/composables/"  # Vue only
  frontend_services: "frontend/src/services/"
  types: "frontend/src/types/"
```

Naming conventions (TypeScript):
```yaml
naming_conventions:
  class: "PascalCase"
  file: "kebab-case"
  component: "PascalCase"
  variable: "camelCase"
  constant: "UPPER_SNAKE_CASE"
  database_table: "snake_case"
  entity: "PascalCase"
```

Type mappings (TypeORM types):
- 1: "bytea" / Buffer
- 2, 3: "varchar" / string
- 4, 5, 6: "int" / number
- 7: "bigint" / bigint
- 8, 9: "float" / number
- 10: "timestamp" / Date
- 11: "date" / Date
- 12: "time" / string
- 13: "boolean" / boolean
- 14: "decimal" / Decimal
- 23: "json" / object
- 26: "uuid" / string

**Laravel + React:**
- group: "spa"
- language: "php"
- framework: "laravel"
- orm: "eloquent"
- orm_pattern: "active-record"
- template_engine: "jsx"

File structure:
```yaml
file_structure:
  # Backend (Laravel)
  models: "app/Models/"
  controllers: "app/Http/Controllers/"
  services: "app/Services/"
  routes: "routes/"
  # Frontend (React)
  components: "resources/js/components/"
  pages: "resources/js/pages/"
  hooks: "resources/js/hooks/"
  frontend_services: "resources/js/services/"
  types: "resources/js/types/"
```

Naming conventions (PHP/React):
```yaml
naming_conventions:
  class: "PascalCase"
  file: "PascalCase"        # PHP classes
  component: "PascalCase"   # React
  variable: "camelCase"     # PHP/JS
  constant: "UPPER_SNAKE_CASE"
  database_table: "snake_case"
```

Type mappings (Eloquent casts):
- 1: "binary"
- 2, 3: "string"
- 4, 5, 6: "integer"
- 7: "integer"
- 8, 9: "float"
- 10, 11, 12: "datetime"
- 13: "boolean"
- 14: "decimal:2"
- 23: "array"
- 26: "string"
  </action>
  <verify>
    ls src/wxcode/data/stacks/spa/*.yaml | wc -l
    # Should output 5
    python -c "import yaml; [print(yaml.safe_load(open(f))['stack_id']) for f in __import__('glob').glob('src/wxcode/data/stacks/spa/*.yaml')]"
    # Should output all 5 stack IDs
  </verify>
  <done>NestJS and Laravel SPA stack configs created</done>
</task>

</tasks>

<verification>
1. All 5 YAML files exist: `ls src/wxcode/data/stacks/spa/*.yaml`
2. YAML files are valid: `python -c "import yaml; ..."`
3. Each file has backend + frontend file_structure paths
4. Each file has group: "spa"
</verification>

<success_criteria>
- 5 YAML files in src/wxcode/data/stacks/spa/
- Each file has complete Stack model fields
- File structure includes both backend and frontend paths
- Type mappings include all 28 HyperFile codes
</success_criteria>

<output>
After completion, create `.planning/phases/15-stack-configuration/15-02-SUMMARY.md`
</output>

---
phase: 15-stack-configuration
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/wxcode/data/stacks/fullstack/nextjs-app-router.yaml
  - src/wxcode/data/stacks/fullstack/nextjs-pages.yaml
  - src/wxcode/data/stacks/fullstack/nuxt3.yaml
  - src/wxcode/data/stacks/fullstack/sveltekit.yaml
  - src/wxcode/data/stacks/fullstack/remix.yaml
autonomous: true

must_haves:
  truths:
    - "5 fullstack stack configs exist as YAML files"
    - "Each YAML has all required fields (stack_id, name, group, language, framework, orm, etc.)"
    - "Type mappings use Prisma types for consistency"
    - "File structure follows official framework conventions"
  artifacts:
    - path: "src/wxcode/data/stacks/fullstack/nextjs-app-router.yaml"
      provides: "Next.js App Router stack config"
      contains: "stack_id: nextjs-app-router"
    - path: "src/wxcode/data/stacks/fullstack/nuxt3.yaml"
      provides: "Nuxt 3 stack config"
      contains: "stack_id: nuxt3"
    - path: "src/wxcode/data/stacks/fullstack/sveltekit.yaml"
      provides: "SvelteKit stack config"
      contains: "stack_id: sveltekit"
    - path: "src/wxcode/data/stacks/fullstack/remix.yaml"
      provides: "Remix stack config"
      contains: "stack_id: remix"
  key_links:
    - from: "fullstack/*.yaml"
      to: "Prisma schema"
      via: "type_mappings"
      pattern: "String|Int|BigInt|Float|DateTime|Boolean|Decimal|Json"
---

<objective>
Create YAML configuration files for the 5 fullstack target stacks.

Purpose: Fullstack frameworks (Next.js, Nuxt, SvelteKit, Remix) have unified codebases where frontend and backend coexist. These configs define file-based routing, server components, and Prisma ORM conventions for LLM-driven code generation.

Output: 5 YAML files in src/wxcode/data/stacks/fullstack/
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/15-stack-configuration/15-RESEARCH.md
@src/wxcode/models/stack.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Next.js stack configs</name>
  <files>
    src/wxcode/data/stacks/fullstack/nextjs-app-router.yaml
    src/wxcode/data/stacks/fullstack/nextjs-pages.yaml
  </files>
  <action>
Create 2 YAML files for Next.js stacks:

**Common characteristics:**
- group: "fullstack"
- language: "typescript"
- framework: "nextjs"
- orm: "prisma"
- orm_pattern: "data-mapper"
- template_engine: "jsx"

**1. nextjs-app-router.yaml (Next.js 13+ App Router):**

```yaml
stack_id: "nextjs-app-router"
name: "Next.js (App Router)"
group: "fullstack"
language: "typescript"
framework: "nextjs"
orm: "prisma"
orm_pattern: "data-mapper"
template_engine: "jsx"

file_structure:
  models: "prisma/"
  schemas: "src/lib/schemas/"
  routes: "src/app/api/"
  services: "src/lib/services/"
  templates: "src/app/"
  static: "public/"
  components: "src/components/"
  lib: "src/lib/"
  types: "src/types/"
  actions: "src/app/actions/"

naming_conventions:
  class: "PascalCase"
  file: "kebab-case"
  component: "PascalCase"
  variable: "camelCase"
  constant: "UPPER_SNAKE_CASE"
  database_table: "snake_case"
  route: "kebab-case"
  server_action: "camelCase"
```

**2. nextjs-pages.yaml (Pages Router - legacy but still used):**

```yaml
stack_id: "nextjs-pages"
name: "Next.js (Pages Router)"
group: "fullstack"
language: "typescript"
framework: "nextjs"
orm: "prisma"
orm_pattern: "data-mapper"
template_engine: "jsx"

file_structure:
  models: "prisma/"
  schemas: "src/lib/schemas/"
  routes: "src/pages/api/"
  services: "src/lib/services/"
  templates: "src/pages/"
  static: "public/"
  components: "src/components/"
  lib: "src/lib/"
  types: "src/types/"
  styles: "src/styles/"
```

**Type mappings (Prisma types) - same for both:**
```yaml
type_mappings:
  "1": "Bytes"
  "2": "String"
  "3": "String"
  "4": "Int"
  "5": "Int"
  "6": "Int"
  "7": "BigInt"
  "8": "Float"
  "9": "Float"
  "10": "DateTime"
  "11": "DateTime"
  "12": "DateTime"
  "13": "Boolean"
  "14": "Decimal"
  "15": "String"
  "16": "String"
  "17": "Bytes"
  "18": "String"
  "19": "Int"
  "20": "String"
  "21": "String"
  "22": "String"
  "23": "Json"
  "24": "Int"
  "25": "BigInt"
  "26": "String"
  "27": "String"
  "28": "String"
```

**imports_template and model_template:**
Include Prisma client imports and Prisma schema model template.
  </action>
  <verify>
    ls src/wxcode/data/stacks/fullstack/nextjs-*.yaml
    # Should show 2 files
    python -c "import yaml; print(yaml.safe_load(open('src/wxcode/data/stacks/fullstack/nextjs-app-router.yaml'))['file_structure']['routes'])"
    # Should output: src/app/api/
  </verify>
  <done>Next.js App Router and Pages Router stack configs created</done>
</task>

<task type="auto">
  <name>Task 2: Create Vue/Svelte fullstack configs</name>
  <files>
    src/wxcode/data/stacks/fullstack/nuxt3.yaml
    src/wxcode/data/stacks/fullstack/sveltekit.yaml
    src/wxcode/data/stacks/fullstack/remix.yaml
  </files>
  <action>
Create 3 YAML files for Nuxt 3, SvelteKit, and Remix:

**1. nuxt3.yaml:**
```yaml
stack_id: "nuxt3"
name: "Nuxt 3"
group: "fullstack"
language: "typescript"
framework: "nuxt"
orm: "prisma"
orm_pattern: "data-mapper"
template_engine: "vue"

file_structure:
  models: "prisma/"
  schemas: "server/schemas/"
  routes: "server/api/"
  services: "server/services/"
  templates: "pages/"
  static: "public/"
  components: "components/"
  composables: "composables/"
  layouts: "layouts/"
  middleware: "middleware/"
  plugins: "plugins/"
  utils: "utils/"

naming_conventions:
  class: "PascalCase"
  file: "kebab-case"
  component: "PascalCase"
  variable: "camelCase"
  constant: "UPPER_SNAKE_CASE"
  database_table: "snake_case"
  composable: "useCamelCase"
```

**2. sveltekit.yaml:**
```yaml
stack_id: "sveltekit"
name: "SvelteKit"
group: "fullstack"
language: "typescript"
framework: "sveltekit"
orm: "prisma"
orm_pattern: "data-mapper"
template_engine: "svelte"

file_structure:
  models: "prisma/"
  schemas: "src/lib/schemas/"
  routes: "src/routes/api/"
  services: "src/lib/server/"
  templates: "src/routes/"
  static: "static/"
  components: "src/lib/components/"
  lib: "src/lib/"
  stores: "src/lib/stores/"
  server: "src/lib/server/"

naming_conventions:
  class: "PascalCase"
  file: "kebab-case"
  component: "PascalCase"
  variable: "camelCase"
  constant: "UPPER_SNAKE_CASE"
  database_table: "snake_case"
  store: "camelCase"
  route_file: "+page.svelte"
  layout_file: "+layout.svelte"
  server_file: "+server.ts"
```

**3. remix.yaml:**
```yaml
stack_id: "remix"
name: "Remix"
group: "fullstack"
language: "typescript"
framework: "remix"
orm: "prisma"
orm_pattern: "data-mapper"
template_engine: "jsx"

file_structure:
  models: "prisma/"
  schemas: "app/lib/schemas/"
  routes: "app/routes/"
  services: "app/lib/services/"
  templates: "app/routes/"
  static: "public/"
  components: "app/components/"
  lib: "app/lib/"
  utils: "app/utils/"
  root: "app/root.tsx"

naming_conventions:
  class: "PascalCase"
  file: "kebab-case"
  component: "PascalCase"
  variable: "camelCase"
  constant: "UPPER_SNAKE_CASE"
  database_table: "snake_case"
  loader: "loader"
  action: "action"
```

**Type mappings:** All three use Prisma, so use the same type_mappings as Next.js:
```yaml
type_mappings:
  "1": "Bytes"
  "2": "String"
  # ... (same 28 mappings as nextjs)
```

**imports_template and model_template:**
- Nuxt: Include Prisma + Nuxt auto-imports reference
- SvelteKit: Include Prisma + $lib imports
- Remix: Include Prisma + Remix loader/action patterns
  </action>
  <verify>
    ls src/wxcode/data/stacks/fullstack/*.yaml | wc -l
    # Should output 5
    python -c "import yaml; [print(yaml.safe_load(open(f))['stack_id']) for f in __import__('glob').glob('src/wxcode/data/stacks/fullstack/*.yaml')]"
    # Should output all 5 stack IDs
  </verify>
  <done>Nuxt 3, SvelteKit, and Remix stack configs created</done>
</task>

</tasks>

<verification>
1. All 5 YAML files exist: `ls src/wxcode/data/stacks/fullstack/*.yaml`
2. YAML files are valid: `python -c "import yaml; ..."`
3. Each file has group: "fullstack"
4. Each file uses Prisma type mappings
5. File structures match official framework conventions
</verification>

<success_criteria>
- 5 YAML files in src/wxcode/data/stacks/fullstack/
- Each file has complete Stack model fields
- Type mappings use Prisma types consistently
- File structures follow official documentation
</success_criteria>

<output>
After completion, create `.planning/phases/15-stack-configuration/15-03-SUMMARY.md`
</output>

---
phase: 27-testing-and-polish
plan: 03
type: execute
wave: 2
depends_on: ["27-01", "27-02"]
files_modified:
  - .planning/phases/27-testing-and-polish/27-MANUAL-TEST-CHECKLIST.md
  - .planning/phases/27-testing-and-polish/27-UAT.md
autonomous: false

must_haves:
  truths:
    - "User can type in terminal and see input echoed"
    - "User can press Ctrl+C to interrupt process"
    - "Terminal shows connection status"
    - "Error messages are clear to user"
    - "Terminal feels responsive during use"
  artifacts:
    - path: ".planning/phases/27-testing-and-polish/27-MANUAL-TEST-CHECKLIST.md"
      provides: "Manual testing procedures for frontend"
      min_lines: 80
    - path: ".planning/phases/27-testing-and-polish/27-UAT.md"
      provides: "UAT results document"
      min_lines: 30
  key_links:
    - from: "27-MANUAL-TEST-CHECKLIST.md"
      to: "frontend/src/components/terminal/InteractiveTerminal.tsx"
      via: "Tests frontend component"
      pattern: "InteractiveTerminal"
---

<objective>
Create manual testing checklist and perform UAT for the interactive terminal.

Purpose: Verify user experience meets quality standards through human testing since frontend has no automated test framework.

Output: Manual test checklist document and completed UAT results.
</objective>

<execution_context>
@/Users/gilberto/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gilberto/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/27-testing-and-polish/27-RESEARCH.md
@frontend/src/components/terminal/InteractiveTerminal.tsx
@frontend/src/hooks/useTerminalWebSocket.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create manual test checklist</name>
  <files>.planning/phases/27-testing-and-polish/27-MANUAL-TEST-CHECKLIST.md</files>
  <action>
Create a comprehensive manual test checklist for the interactive terminal frontend.

Structure the document as:

```markdown
# Interactive Terminal - Manual Test Checklist

**Phase:** 27 - Testing and Polish
**Component:** InteractiveTerminal + useTerminalWebSocket
**Last Updated:** 2026-01-25

## Prerequisites

- [ ] Backend running (`cd backend && python -m uvicorn wxcode.main:app --reload`)
- [ ] Frontend running (`cd frontend && npm run dev`)
- [ ] MongoDB running
- [ ] A test Knowledge Base imported with at least one PAGE element
- [ ] A test Output Project created

## Test Scenarios

### 1. Input Scenarios (SC-1)

| ID | Scenario | Steps | Expected Result | Status |
|----|----------|-------|-----------------|--------|
| 1.1 | Normal typing | 1. Open milestone terminal 2. Type "hello" | Characters appear in terminal | [ ] |
| 1.2 | Enter key | 1. Type command 2. Press Enter | Line sent to Claude Code | [ ] |
| 1.3 | Paste text | 1. Copy text to clipboard 2. Ctrl+V in terminal | Text pasted and displayed | [ ] |
| 1.4 | Ctrl+C | 1. Start long operation 2. Press Ctrl+C | Process interrupted, prompt returns | [ ] |
| 1.5 | Backspace | 1. Type text 2. Press Backspace | Last character deleted | [ ] |
| 1.6 | Arrow keys | 1. Type text 2. Press left arrow | Cursor moves left | [ ] |

### 2. Connection Scenarios (SC-3)

| ID | Scenario | Steps | Expected Result | Status |
|----|----------|-------|-----------------|--------|
| 2.1 | Initial connect | 1. Open milestone page | "Connected" status shown | [ ] |
| 2.2 | Reconnect after refresh | 1. Refresh page | Previous output replayed | [ ] |
| 2.3 | Network disconnect | 1. Disable network 2. Re-enable | Reconnects automatically | [ ] |
| 2.4 | Backend restart | 1. Restart backend | Terminal shows disconnect, then reconnects | [ ] |

### 3. Resize Scenarios

| ID | Scenario | Steps | Expected Result | Status |
|----|----------|-------|-----------------|--------|
| 3.1 | Browser resize | 1. Resize browser window | Terminal adjusts smoothly | [ ] |
| 3.2 | Resize during output | 1. Start output 2. Resize | Output continues after resize | [ ] |

### 4. Error Handling (SC-4)

| ID | Scenario | Steps | Expected Result | Status |
|----|----------|-------|-----------------|--------|
| 4.1 | Invalid milestone | 1. Navigate to non-existent milestone | Clear error message | [ ] |
| 4.2 | Finished milestone | 1. Open completed milestone | Shows "already finished" message | [ ] |

### 5. User Experience (SC-4)

| ID | Scenario | Steps | Expected Result | Status |
|----|----------|-------|-----------------|--------|
| 5.1 | Responsive typing | 1. Type rapidly | No lag or dropped characters | [ ] |
| 5.2 | Clear feedback | 1. Observe terminal during use | Status indicators are clear | [ ] |
| 5.3 | Terminal focus | 1. Click on terminal | Keyboard focus gained | [ ] |

## Test Results Summary

| Category | Pass | Fail | Blocked |
|----------|------|------|---------|
| Input Scenarios | | | |
| Connection Scenarios | | | |
| Resize Scenarios | | | |
| Error Handling | | | |
| User Experience | | | |
| **Total** | | | |

## Issues Found

(Document any issues found during testing)

## Sign-off

- [ ] All critical scenarios pass
- [ ] No blocking issues
- [ ] Ready for production
```
  </action>
  <verify>
File exists and contains all test scenarios from Phase 27 success criteria.
  </verify>
  <done>
Manual test checklist created with 15+ test scenarios covering all success criteria.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Interactive terminal with bidirectional communication</what-built>
  <how-to-verify>
Execute the manual test checklist created in Task 1:

1. Start the backend: `cd /Users/gilberto/projetos/wxk/wxcode && python -m uvicorn wxcode.main:app --reload --port 8000`

2. Start the frontend: `cd /Users/gilberto/projetos/wxk/wxcode/frontend && npm run dev`

3. Open browser to http://localhost:3000

4. Navigate to an existing KB and Output Project (or create new ones)

5. Create or open a Milestone to trigger the interactive terminal

6. Execute each test scenario in the checklist

7. Mark pass/fail status for each scenario

8. Document any issues found

**Critical scenarios to verify:**
- Can type in terminal and see characters (SC-1)
- Ctrl+C interrupts process (SC-1)
- Page refresh replays output (SC-3)
- Terminal feels responsive (SC-4)
  </how-to-verify>
  <resume-signal>
Type one of:
- "all pass" - All scenarios passed
- "issues: [description]" - Some scenarios failed, describe issues
- "blocked: [reason]" - Could not complete testing
  </resume-signal>
</task>

<task type="auto">
  <name>Task 3: Create UAT document</name>
  <files>.planning/phases/27-testing-and-polish/27-UAT.md</files>
  <action>
Based on the checkpoint results, create the UAT document.

If all pass:
```markdown
# Phase 27: Testing and Polish - UAT

**Status:** PASSED
**Tested:** 2026-01-25
**Tester:** User

## Success Criteria Verification

| Criteria | Status | Evidence |
|----------|--------|----------|
| All input scenarios tested | PASS | Manual test 1.1-1.6 passed |
| Concurrent read/write tested | PASS | Integration tests passed |
| Connection recovery tested | PASS | Manual test 2.1-2.4 passed |
| UX smooth with clear feedback | PASS | Manual test 5.1-5.3 passed |

## Test Coverage

- Unit tests: 27+ new tests (terminal_handler, pty_session_manager)
- Integration tests: 12+ tests (terminal_websocket, stress tests)
- Manual tests: 15+ scenarios executed

## Issues Found

None / [List any issues if found]

## Conclusion

Phase 27 Testing and Polish is complete. The interactive terminal is production-ready.
```

If issues found, document them and set status to DIAGNOSED:
```markdown
**Status:** DIAGNOSED
...
## Issues Found

| Issue | Severity | Description |
|-------|----------|-------------|
| ... | ... | ... |

## Required Fixes

- [ ] Fix description
```
  </action>
  <verify>
UAT document exists with clear status (PASSED or DIAGNOSED).
  </verify>
  <done>
UAT document created reflecting actual test results.
  </done>
</task>

</tasks>

<verification>
- Manual test checklist exists
- UAT document exists with status
- All Phase 27 success criteria addressed
</verification>

<success_criteria>
- 27-MANUAL-TEST-CHECKLIST.md created with 15+ scenarios
- Human verification completed
- 27-UAT.md created with clear pass/fail status
- If PASSED: Phase 27 complete
- If DIAGNOSED: Gap closure needed
</success_criteria>

<output>
After completion, create `.planning/phases/27-testing-and-polish/27-03-SUMMARY.md`
</output>

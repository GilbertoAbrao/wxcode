# Nuxt 3 Stack Configuration
# Target: Nuxt 3 with Nitro server engine
# Use case: Vue.js fullstack applications with auto-imports

stack_id: "nuxt3"
name: "Nuxt 3"
group: "fullstack"
language: "typescript"
framework: "nuxt"
orm: "prisma"
orm_pattern: "data-mapper"
template_engine: "vue"

file_structure:
  models: "prisma/"
  schemas: "server/schemas/"
  routes: "server/api/"
  services: "server/services/"
  templates: "pages/"
  static: "public/"
  components: "components/"
  composables: "composables/"
  layouts: "layouts/"
  middleware: "middleware/"
  plugins: "plugins/"
  utils: "utils/"

naming_conventions:
  class: "PascalCase"
  file: "kebab-case"
  component: "PascalCase"
  variable: "camelCase"
  constant: "UPPER_SNAKE_CASE"
  database_table: "snake_case"
  composable: "useCamelCase"
  api_route: "kebab-case"

# HyperFile type code to Prisma type mappings
type_mappings:
  "1": "Bytes"       # Binary
  "2": "String"      # Text (short)
  "3": "String"      # Text (long)
  "4": "Int"         # Integer (16-bit)
  "5": "Int"         # Integer (32-bit)
  "6": "Int"         # Integer (signed)
  "7": "BigInt"      # Integer (64-bit)
  "8": "Float"       # Real (single)
  "9": "Float"       # Real (double)
  "10": "DateTime"   # Date
  "11": "DateTime"   # Time
  "12": "DateTime"   # DateTime
  "13": "Boolean"    # Boolean
  "14": "Decimal"    # Currency/Decimal
  "15": "String"     # Memo
  "16": "String"     # Rich Text
  "17": "Bytes"      # Image/Binary
  "18": "String"     # Sound (path)
  "19": "Int"        # Combo index
  "20": "String"     # Radio value
  "21": "String"     # UUID
  "22": "String"     # Enum (as string)
  "23": "Json"       # JSON/Variant
  "24": "Int"        # Duration (seconds)
  "25": "BigInt"     # Timestamp
  "26": "String"     # URL
  "27": "String"     # Email
  "28": "String"     # Phone

imports_template: |
  // Nuxt auto-imports: no explicit imports needed for composables
  // Prisma client (server-side only)
  import { PrismaClient } from '@prisma/client'
  import { z } from 'zod'

  const prisma = new PrismaClient()

model_template: |
  // Prisma schema model example
  model User {
    id        Int      @id @default(autoincrement())
    email     String   @unique
    name      String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
  }

  // API route (server/api/users.get.ts)
  export default defineEventHandler(async (event) => {
    const users = await prisma.user.findMany()
    return users
  })

  // Composable (composables/useUsers.ts)
  export const useUsers = () => {
    return useFetch('/api/users')
  }

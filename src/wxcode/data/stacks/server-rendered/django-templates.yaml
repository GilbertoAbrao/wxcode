# Django + Templates Stack Configuration
# Server-rendered Python stack with Django ORM

stack_id: "django-templates"
name: "Django + Templates"
group: "server-rendered"
language: "python"
framework: "django"
orm: "django-orm"
orm_pattern: "active-record"
template_engine: "django"

file_structure:
  models: "app/models.py"
  views: "app/views.py"
  urls: "app/urls.py"
  forms: "app/forms.py"
  admin: "app/admin.py"
  templates: "app/templates/"
  static: "app/static/"
  management: "app/management/commands/"
  migrations: "app/migrations/"
  tests: "app/tests/"

naming_conventions:
  class: "PascalCase"
  file: "snake_case"
  variable: "snake_case"
  constant: "UPPER_SNAKE_CASE"
  database_table: "snake_case"
  url_name: "snake_case"
  template: "snake_case"

# HyperFile type codes (1-28) to Django field types
type_mappings:
  "1": "BinaryField"        # Binary
  "2": "CharField"          # String
  "3": "TextField"          # Text/Memo
  "4": "IntegerField"       # Integer 4 bytes
  "5": "SmallIntegerField"  # Integer 2 bytes (short)
  "6": "SmallIntegerField"  # Integer 1 byte (tiny)
  "7": "BigIntegerField"    # Integer 8 bytes (bigint)
  "8": "FloatField"         # Real 4 bytes
  "9": "FloatField"         # Real 8 bytes
  "10": "DateTimeField"     # DateTime
  "11": "DateField"         # Date
  "12": "TimeField"         # Time
  "13": "BooleanField"      # Boolean
  "14": "DecimalField"      # Currency
  "15": "TextField"         # Memo text
  "16": "CharField"         # Character
  "17": "BinaryField"       # Sound/Image (binary)
  "18": "CharField"         # Enumeration
  "19": "DurationField"     # Duration
  "20": "CharField"         # Composite key
  "21": "AutoField"         # Automatic ID
  "22": "CharField"         # Radio button
  "23": "JSONField"         # JSON
  "24": "PositiveIntegerField"   # Unsigned integer
  "25": "PositiveBigIntegerField" # Unsigned bigint
  "26": "UUIDField"         # UUID
  "27": "CharField"         # Scientific notation
  "28": "CharField"         # Password (hashed)

imports_template: |
  from django.db import models
  from django.contrib.auth.models import AbstractUser
  from django.utils import timezone
  from uuid import uuid4

model_template: |
  class {{ class_name }}(models.Model):
      """{{ description }}"""
      {% for field in fields %}
      {{ field.name }} = models.{{ field.django_type }}({% if field.max_length %}max_length={{ field.max_length }}, {% endif %}{% if field.optional %}null=True, blank=True{% endif %})
      {% endfor %}

      class Meta:
          db_table = '{{ table_name }}'
          verbose_name = '{{ verbose_name }}'
          verbose_name_plural = '{{ verbose_name_plural }}'

      def __str__(self):
          return f"{{ class_name }}({{ '{' }}self.pk{{ '}' }})"

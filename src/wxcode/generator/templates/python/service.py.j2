"""Service for {{ service_name }}.

Generated by wxcode from WLanguage procedures.
Original file: {{ original_file }}
"""

from typing import Any

from motor.motor_asyncio import AsyncIOMotorDatabase

{% for import_line in imports %}
{{ import_line }}
{% endfor %}


class {{ class_name }}:
    """{{ docstring or 'Service converted from ' + original_file }}."""

    def __init__(self, db: AsyncIOMotorDatabase):
        """Initialize service with database connection.

        Args:
            db: MongoDB database instance
        """
        self.db = db

    {% for method in methods %}
    async def {{ method.name }}(
        self,
        {% for param in method.params %}
        {{ param.name }}: {{ param.type }}{% if param.default is not none %} = {{ param.default }}{% endif %},
        {% endfor %}
    ) -> {{ method.return_type }}:
        """{{ method.docstring or 'Procedure converted from WLanguage.' }}

        Original: {{ method.original_signature }}
        """
        {% if method.body %}
        {{ method.body | indent(8) }}
        {% elif method.needs_manual_conversion %}
        # TODO: [WXCODE] Manual conversion required
        # Original WLanguage:
        # {{ method.original_code | replace('\n', '\n        # ') }}
        # Reason: {{ method.conversion_reason }}
        raise NotImplementedError("Requires manual conversion")
        {% else %}
        # TODO: Implement method logic
        pass
        {% endif %}

    {% endfor %}

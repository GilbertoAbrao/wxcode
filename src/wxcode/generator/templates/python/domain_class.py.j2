"""Domain class {{ class_name }}.

Generated by wxcode from WLanguage class.
Original file: {{ original_file }}
"""

from dataclasses import dataclass, field
from typing import Any, Optional
{% if is_abstract %}
from abc import ABC, abstractmethod
{% endif %}

{% for import_line in imports %}
{{ import_line }}
{% endfor %}

{% if base_class %}
from .{{ base_class | snake_case }} import {{ base_class }}
{% endif %}


{% if is_abstract %}
class {{ class_name }}(ABC):
{% elif base_class %}
@dataclass
class {{ class_name }}({{ base_class }}):
{% else %}
@dataclass
class {{ class_name }}:
{% endif %}
    """{{ docstring or 'Class converted from ' + original_file }}."""

    {% if constants %}
    # Constants
    {% for const in constants %}
    {{ const.name }}: {{ const.type }} = {{ const.value }}
    {% endfor %}

    {% endif %}
    {% if members %}
    # Members
    {% for member in members %}
    {% if member.is_private %}
    _{{ member.name }}: {{ member.type }} = {{ member.default }}  # private
    {% else %}
    {{ member.name }}: {{ member.type }} = {{ member.default }}
    {% endif %}
    {% endfor %}

    {% endif %}
    {% if init_code %}
    def __post_init__(self):
        """Post-initialization from WLanguage constructor."""
        {{ init_code | indent(8) }}

    {% endif %}
    {% for method in methods %}
    {% if method.is_abstract %}
    @abstractmethod
    {% endif %}
    async def {{ method.name }}(
        self,
        {% for param in method.params %}
        {{ param.name }}: {{ param.type }}{% if param.default is not none %} = {{ param.default }}{% endif %},
        {% endfor %}
    ) -> {{ method.return_type }}:
        """{{ method.docstring }}

        Original: {{ method.original_signature }}
        """
        {% if method.body %}
        {{ method.body | indent(8) }}
        {% elif method.is_abstract %}
        ...
        {% else %}
        # TODO: Implement method logic
        pass
        {% endif %}

    {% endfor %}
